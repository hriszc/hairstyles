# 技术解决方案

## 1. 系统概述
基于用户上传的单张正脸照片，自动推荐最合适的发型与服饰，并生成“发型名称+理发沟通卡+服饰清单”以便用户落地使用。

## 2. 架构设计
- **前端/后端一体化**：采用 Next.js 搭建页面与 API，方便部署与服务器端渲染。
- **样式与 UI**：使用 TailwindCSS 构建响应式界面。
- **数据库**：可选 Drizzle ORM 管理发型库、服饰库与规则映射。
- **AI 能力**：基于 Vercel AI Elements 调用图像分析与推荐模型。
- **鉴权**：如需限制访问，可接入 Better Auth；数据校验采用 Zod。

## 3. 核心模块
### 3.1 图片上传与校验
- 校验正脸、无遮挡、光照等质量要求。
- 识别名人或他人照片并拒绝处理。

### 3.2 面部特征分析
- 分析脸型、五官比例、发际线与发质、颈肩比例及肤色。
- 将分析结果结构化为可供规则引擎使用的属性。

### 3.3 规则引擎
- 将结构化特征映射到标准化发型库与服饰清单模板。
- 输出发型名称、理发参数（推剪号数、长度、分线等）及服饰建议。

### 3.4 结果展示
- 生成单张示意图预览发型与上装轮廓。
- 展示理发沟通卡与服饰清单，并提供一键复制功能。

## 4. 数据库设计
- **hairstyles**：保存发型名称、参数与示例图。
- **outfits**：保存服饰单品、版型、材质与配色建议。
- **rules**：脸型等特征与发型、服饰模板的映射关系。

## 5. 处理流程
1. 用户进入页面并上传照片。
2. 系统执行图片质量与合规校验。
3. （可选）用户选择使用场景，默认“通用商务休闲”。
4. AI 模型分析面部与外观特征。
5. 规则引擎生成发型推荐与服饰清单。
6. 前端展示结果并支持复制文本。

## 6. 非功能性要求
- **性能**：全流程处理时间控制在 30–60s。
- **隐私**：上传照片仅用于分析，不做持久化存储。
- **扩展性**：发型库与服饰库可通过数据库扩展。
